#include "WidgetManager.h"

UWidgetManager::UWidgetManager() {
	CurrentWidget = nullptr;
}

void UWidgetManager::ChangeWidget(TSubclassOf<UUserWidget> NewWidgetClass) {
	UE_LOG(LogTemp, Warning, TEXT("ChangeWidget called"))
	if (CurrentWidget) {
		CurrentWidget->RemoveFromViewport();
		CurrentWidget = nullptr;
	}

	if (NewWidgetClass) {
		UE_LOG(LogTemp, Warning, TEXT("New widget class is valid"))
		CurrentWidget = CreateWidget(GetWorld(), NewWidgetClass);
		if (CurrentWidget) {
			CurrentWidget->AddToViewport();
			UE_LOG(LogTemp, Warning, TEXT("New widget creation succeeded"))
		}
		else 
			UE_LOG(LogTemp, Warning, TEXT("New widget creation failed"))
	}
}